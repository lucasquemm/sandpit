{"version":3,"sources":["elements/empty.js","random.js","element.js","elements/wood.js","elements/smoke.js","elements/oil.js","elements/plant.js","elements/fire.js","elements/water.js","elements/sand.js","elements/stone.js","elements/index.js","sandpit.js","canvas.js","main.js"],"names":["EMPTY","NAME","empty","type","clock","make","rand","max","min","Math","random","randInt","round","pickRand","values","length","chance","threshold","color","meta","colorInput","createColor","updateColor","cell","element","despawnChance","chanceOfGoingStraight","chanceOfSpread","direction","update","sandpit","above","get","set","move","is","water","below","fire","swap","energy","isStem","kind","undefined","dx","dy","neighbors1","nx","ny","ignitingChance","burningChance","extinguishChance","looseFlameChance","orange1","orange2","red1","red2","red3","phase","ignite","igniteTarget","wood","oil","plant","burn","spreadChance","burnTarget","neighbors2","smoke","noNeighbors","activeElements","sand","stone","generation","upperBound","defaultUpperBound","activeCells","cells","size","init","newSize","x","y","Array","from","getIndex","index","makeNeighbors","range","_","i","n","flat","createApi","cx","cy","c0","c1","self","getCoords","draw","l","push","getUpperBound","refreshUpperBound","getActive","width","height","cellSize","canvas","document","querySelector","ctx","getContext","alpha","dpr","window","devicePixelRatio","boundsOffset","style","scale","fillStyle","fillRect","world","boundingY","DEBUG","blocks","now","elapsed","then","fpsInterval","MAX_FPS","tick","loop","requestAnimationFrame","Date","start","$canvas","drawing","coord","c","floor","e","handleDrawing","forEach","coords","useElement","addEventListener","selectedElement","elements","panel","Object","btn","createElement","textContent","appendChild"],"mappings":";AAGA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,KAAA,QAAA,KAAA,QAAA,MAAA,QAAA,WAAA,EAHA,IAAMA,EAAQ,QAGd,QAAA,MAAA,EAFA,IAAMC,EAAOD,EAEb,QAAA,KAAA,EADA,IAAME,EAAQ,WAAO,MAAA,CAAEC,KAAMH,EAAOI,MAAO,IAC3C,QAAA,MAAA,EAAA,IAAMC,EAAOH,EAAb,QAAA,KAAA;;ACAA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,OAAA,QAAA,SAAA,QAAA,QAAA,QAAA,UAAA,EAHA,IAAMI,EAAO,SAACC,GAAKC,IAAAA,EAAM,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,EAAMC,OAAAA,KAAKC,UAAYH,EAAMC,GAAOA,GAG7D,QAAA,KAAA,EAFA,IAAMG,EAAU,WAAaF,OAAAA,KAAKG,MAAMN,EAAA,WAAX,EAAA,aAE7B,QAAA,QAAA,EADA,IAAMO,EAAW,SAACC,GAAWA,OAAAA,EAAOH,EAAQG,EAAOC,OAAS,EAAG,KAC/D,QAAA,SAAA,EAAA,IAAMC,EAAS,SAACC,GAAcR,OAAAA,KAAKC,SAAWO,GAA9C,QAAA,OAAA;;ACUA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,YAAA,QAAA,UAAA,EAbA,IAAA,EAAA,QAAA,YAaA,EAAA,CAAA,OAAA,SAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,KAAA,GAAA,GAAA,OAAA,sBAAA,CAAA,IAAA,EAAA,OAAA,sBAAA,GAAA,IAAA,EAAA,EAAA,OAAA,SAAA,GAAA,OAAA,OAAA,yBAAA,EAAA,GAAA,cAAA,EAAA,KAAA,MAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,UAAA,OAAA,IAAA,CAAA,IAAA,EAAA,MAAA,UAAA,GAAA,UAAA,GAAA,GAAA,EAAA,EAAA,EAAA,OAAA,IAAA,GAAA,QAAA,SAAA,GAAA,EAAA,EAAA,EAAA,EAAA,MAAA,OAAA,0BAAA,OAAA,iBAAA,EAAA,OAAA,0BAAA,IAAA,EAAA,OAAA,IAAA,QAAA,SAAA,GAAA,OAAA,eAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,MAAA,OAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,KAAA,EAAA,OAAA,eAAA,EAAA,EAAA,CAAA,MAAA,EAAA,YAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,GAAA,EAAA,EAAA,SAAA,EAAA,EAAA,GAAA,GAAA,MAAA,EAAA,MAAA,GAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAAA,GAAA,OAAA,sBAAA,CAAA,IAAA,EAAA,OAAA,sBAAA,GAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,EAAA,EAAA,GAAA,EAAA,QAAA,IAAA,GAAA,OAAA,UAAA,qBAAA,KAAA,EAAA,KAAA,EAAA,GAAA,EAAA,IAAA,OAAA,EAAA,SAAA,EAAA,EAAA,GAAA,GAAA,MAAA,EAAA,MAAA,GAAA,IAAA,EAAA,EAAA,EAAA,GAAA,EAAA,OAAA,KAAA,GAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,EAAA,EAAA,GAAA,EAAA,QAAA,IAAA,IAAA,EAAA,GAAA,EAAA,IAAA,OAAA,EAXA,IAAMZ,EAAO,SAAA,GAAGF,IAAAA,EAAAA,EAAAA,KAAMe,EAAAA,EAAAA,MAAUC,EAAnB,EAAA,EAAA,GAAA,OAAA,EAAA,CACXhB,KAAAA,EACAC,MAAO,EACPgB,WAAYF,EACZA,MAAOG,EAAYH,IAChBC,IAML,QAAA,KAAA,EAHA,IAAME,EAAc,SAACH,GACZA,MAAAA,OAAAA,OAAAA,EAAM,GAASA,QAAAA,OAAAA,EAAM,GAAO,MAAA,QAAA,EAAQA,EAAAA,SAAAA,EAAM,GAAIA,EAAM,IADzC,OAGdI,EAAc,SAACC,GACnBA,EAAKL,MAAQG,EAAYE,EAAKH,aADhC,QAAA,YAAA;;ACTA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,KAAA,QAAA,UAAA,EAJA,IAAA,EAAA,EAAA,QAAA,eAIA,SAAA,EAAA,GAAA,GAAA,mBAAA,QAAA,OAAA,KAAA,IAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,OAAA,EAAA,SAAA,GAAA,OAAA,EAAA,EAAA,IAAA,GAAA,SAAA,EAAA,EAAA,GAAA,IAAA,GAAA,GAAA,EAAA,WAAA,OAAA,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,EAAA,GAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,YAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EAFA,IAAMnB,EAAO,OAEb,QAAA,KAAA,EAAA,IAAMI,EAAO,WAAMmB,OAAAA,EAAQnB,KAAK,CAAEF,KAAMF,EAAMiB,MAAO,CAAC,GAAI,GAAI,GAAI,OAAlE,QAAA,KAAA;;ACaA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,OAAA,QAAA,KAAA,QAAA,UAAA,EAjBA,IAAA,EAAA,EAAA,QAAA,YACA,EAAA,QAAA,WACA,EAAA,EAAA,QAAA,eACA,EAAA,QAAA,aAcA,SAAA,EAAA,GAAA,GAAA,mBAAA,QAAA,OAAA,KAAA,IAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,OAAA,EAAA,SAAA,GAAA,OAAA,EAAA,EAAA,IAAA,GAAA,SAAA,EAAA,EAAA,GAAA,IAAA,GAAA,GAAA,EAAA,WAAA,OAAA,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,EAAA,GAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,YAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EAZA,IAAMjB,EAAO,QAYb,QAAA,KAAA,EAXA,IAAMwB,EAAgB,KAChBC,EAAwB,IACxBC,EAAiB,GAEjBtB,EAAO,WACXmB,OAAAA,EAAQnB,KAAK,CACXF,KAAMF,EACN2B,WAAW,EAAS,EAAA,UAAA,CAAC,GAAI,IACzBV,MAAO,CAAC,EAAG,EAAG,GAAI,OAGtB,QAAA,KAAA,EAAA,IAAMW,EAAS,SAACC,EAASP,GACjBQ,IAAAA,EAAQD,EAAQE,IAAI,GAAI,GAMtBD,QAJJ,EAAON,EAAAA,QAAAA,IACTK,EAAQG,IAAI,EAAG,GAAG,EAAlB,EAAA,UAGMF,EAAM5B,MACPH,KAAAA,EAAL,OACM,EAAO0B,EAAAA,QAAAA,GACTI,EAAQI,KAAK,GAAI,GACRJ,EAAQK,GAAGZ,EAAKK,UAAW,EAAG5B,EAA9B,QACT8B,EAAQI,KAAKX,EAAKK,WAAY,GAEhC,MACGQ,KAAAA,EAAMnC,KACT6B,EAAQI,KAAK,GAAI,IAIjB,EAAOP,EAAAA,QAAAA,IAAmBG,EAAQK,GAAGZ,EAAKK,UAAW,EAAG5B,EAA9B,OAC5B8B,EAAQI,KAAKX,EAAKK,UAAW,GAE7BL,EAAKK,YAAc,GAvBvB,QAAA,OAAA;;ACFA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,OAAA,QAAA,KAAA,QAAA,UAAA,EAfA,IAAA,EAAA,QAAA,WACA,EAAA,EAAA,QAAA,eACA,EAAA,EAAA,QAAA,WACA,EAAA,EAAA,QAAA,YACA,EAAA,QAAA,aAWA,SAAA,EAAA,GAAA,GAAA,mBAAA,QAAA,OAAA,KAAA,IAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,OAAA,EAAA,SAAA,GAAA,OAAA,EAAA,EAAA,IAAA,GAAA,SAAA,EAAA,EAAA,GAAA,IAAA,GAAA,GAAA,EAAA,WAAA,OAAA,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,EAAA,GAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,YAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EATA,IAAM3B,EAAO,MASb,QAAA,KAAA,EAPA,IAAMI,EAAO,WACXmB,OAAAA,EAAQnB,KAAK,CACXF,KAAMF,EACN2B,WAAW,EAAS,EAAA,UAAA,CAAC,GAAI,IACzBV,MAAO,CAAC,GAAI,GAAI,GAAI,OAGxB,QAAA,KAAA,EAAA,IAAMW,EAAS,SAACC,EAASP,GAGfc,OAFMP,EAAQE,IAAI,EAAG,GAEf7B,MACPmC,KAAAA,EAAKrC,KACLD,KAAAA,EAAL,MACE8B,EAAQI,KAAK,EAAG,GAChB,MACGjC,KAAAA,EACC6B,EAAQK,GAAGZ,EAAKK,UAAW,EAAG5B,EAA9B,QACF8B,EAAQI,KAAKX,EAAKK,UAAW,GAE/B,MACGQ,KAAAA,EAAMnC,KACL6B,EAAQK,GAAGZ,EAAKK,WAAY,EAAGQ,EAAMnC,OACvC6B,EAAQS,KAAKhB,EAAKK,WAAY,GAKhCE,EAAQK,GAAGZ,EAAKK,UAAW,EAAG5B,EAA9B,OACF8B,EAAQI,KAAKX,EAAKK,UAAW,IACpB,EAAO,EAAA,QAAA,KAAQE,EAAQK,GAAGZ,EAAKK,UAAW,EAAGQ,EAAMnC,MAC5D6B,EAAQS,KAAKhB,EAAKK,UAAW,GAE7BL,EAAKK,YAAc,GAGjB,EAAO,EAAA,QAAA,OACTJ,EAAQF,YAAYC,IA7BxB,QAAA,OAAA;;ACKA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,OAAA,QAAA,KAAA,QAAA,UAAA,EApBA,IAAA,EAAA,QAAA,WACA,EAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,eACA,EAAA,QAAA,aAiBA,SAAA,EAAA,GAAA,GAAA,mBAAA,QAAA,OAAA,KAAA,IAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,OAAA,EAAA,SAAA,GAAA,OAAA,EAAA,EAAA,IAAA,GAAA,SAAA,EAAA,EAAA,GAAA,IAAA,GAAA,GAAA,EAAA,WAAA,OAAA,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,EAAA,GAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,YAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,oBAAA,QAAA,EAAA,OAAA,WAAA,EAAA,cAAA,IAAA,EAAA,CAAA,GAAA,MAAA,QAAA,KAAA,EAAA,EAAA,KAAA,GAAA,GAAA,iBAAA,EAAA,OAAA,CAAA,IAAA,EAAA,GAAA,IAAA,EAAA,EAAA,EAAA,aAAA,MAAA,CAAA,EAAA,EAAA,EAAA,WAAA,OAAA,GAAA,EAAA,OAAA,CAAA,MAAA,GAAA,CAAA,MAAA,EAAA,MAAA,EAAA,OAAA,EAAA,SAAA,GAAA,MAAA,GAAA,EAAA,GAAA,MAAA,IAAA,UAAA,yIAAA,IAAA,EAAA,GAAA,EAAA,GAAA,EAAA,MAAA,CAAA,EAAA,WAAA,EAAA,EAAA,KAAA,IAAA,EAAA,WAAA,IAAA,EAAA,EAAA,OAAA,OAAA,EAAA,EAAA,KAAA,GAAA,EAAA,SAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,WAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,KAAA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,EAAA,IAAA,EAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,6IAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,MAAA,EAAA,KAAA,oBAAA,QAAA,EAAA,OAAA,WAAA,EAAA,cAAA,GAAA,MAAA,EAAA,CAAA,IAAA,EAAA,EAAA,EAAA,GAAA,GAAA,EAAA,GAAA,EAAA,IAAA,IAAA,EAAA,EAAA,KAAA,KAAA,GAAA,EAAA,EAAA,QAAA,QAAA,EAAA,KAAA,EAAA,QAAA,GAAA,EAAA,SAAA,GAAA,GAAA,IAAA,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAAA,OAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAfA,IAAMtB,EAAO,QAeb,QAAA,KAAA,EAbA,IAAMI,EAAO,SAACmC,GAAQtB,IAAAA,EAAQ,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,CAAC,IAAK,GAAI,GAAI,IACpCuB,GAAS,EAAO,EAAA,QAAA,IAEfjB,OAAAA,EAAQnB,KAAK,CAClBF,KAAMF,EACNyC,KAAMD,EAAS,OAAS,MACxBD,YACaG,IAAXH,EAAuBA,EAASC,GAAS,EAAQ,EAAA,SAAA,GAAI,KAAM,EAAQ,EAAA,SAAA,EAAG,GACxEb,UAAW,EAAC,EAAS,EAAA,UAAA,CAAC,EAAG,GAAI,KAAM,GACnCV,MAAAA,KAIJ,QAAA,KAAA,EAAA,IAAMW,EAAS,SAACC,EAASP,GACNA,IAAAA,EAAAA,EAAAA,EAAKK,UAAtB,GAAOgB,EAAP,EAAA,GAAWC,EAAX,EAAA,GAEIf,EAAQK,GAAGS,EAAIC,EAAI7C,EAAnB,SACE,EAAO,EAAA,QAAA,KAAQuB,EAAKiB,OAAS,IAC/BjB,EAAKiB,SACLV,EAAQG,IAAIW,EAAIC,EAAIxC,EAAKkB,EAAKiB,UAIbV,IAVW,EAUXA,EAAAA,EAAAA,EAAQgB,YAVG,IAUS,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAA,IAAA,EAAA,EAAA,EAAA,MAAA,GAA/BC,EAA+B,EAAA,GAA3BC,EAA2B,EAAA,IACnC,EAAO,EAAA,QAAA,MAASlB,EAAQK,GAAGY,EAAIC,EAAIZ,EAAMnC,QAC3C6B,EAAQG,IAAIc,EAAIC,GAAI,EAApB,EAAA,UACAlB,EAAQG,IAAIW,EAAIC,EAAIxC,EAAKkB,EAAKiB,WAbF,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,MAAlC,QAAA,OAAA;;ACkDA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,OAAA,QAAA,KAAA,QAAA,UAAA,EAtEA,IAAA,EAAA,QAAA,WACA,EAAA,EAAA,QAAA,WACA,EAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,UACA,EAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,eACA,EAAA,QAAA,aAgEA,SAAA,EAAA,GAAA,GAAA,mBAAA,QAAA,OAAA,KAAA,IAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,OAAA,EAAA,SAAA,GAAA,OAAA,EAAA,EAAA,IAAA,GAAA,SAAA,EAAA,EAAA,GAAA,IAAA,GAAA,GAAA,EAAA,WAAA,OAAA,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,EAAA,GAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,YAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EAAA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,EAAA,IAAA,EAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,6IAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,MAAA,EAAA,KAAA,oBAAA,QAAA,EAAA,OAAA,WAAA,EAAA,cAAA,GAAA,MAAA,EAAA,CAAA,IAAA,EAAA,EAAA,EAAA,GAAA,GAAA,EAAA,GAAA,EAAA,IAAA,IAAA,EAAA,EAAA,KAAA,KAAA,GAAA,EAAA,EAAA,QAAA,QAAA,EAAA,KAAA,EAAA,QAAA,GAAA,EAAA,SAAA,GAAA,GAAA,IAAA,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAAA,OAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,wIAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,MAAA,EAAA,OAAA,WAAA,MAAA,EAAA,cAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,GAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,oBAAA,QAAA,EAAA,OAAA,WAAA,EAAA,cAAA,IAAA,EAAA,CAAA,GAAA,MAAA,QAAA,KAAA,EAAA,EAAA,KAAA,GAAA,GAAA,iBAAA,EAAA,OAAA,CAAA,IAAA,EAAA,GAAA,IAAA,EAAA,EAAA,EAAA,aAAA,MAAA,CAAA,EAAA,EAAA,EAAA,WAAA,OAAA,GAAA,EAAA,OAAA,CAAA,MAAA,GAAA,CAAA,MAAA,EAAA,MAAA,EAAA,OAAA,EAAA,SAAA,GAAA,MAAA,GAAA,EAAA,GAAA,MAAA,IAAA,UAAA,yIAAA,IAAA,EAAA,GAAA,EAAA,GAAA,EAAA,MAAA,CAAA,EAAA,WAAA,EAAA,EAAA,KAAA,IAAA,EAAA,WAAA,IAAA,EAAA,EAAA,OAAA,OAAA,EAAA,EAAA,KAAA,GAAA,EAAA,SAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,WAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,KAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EA9DA,IAAMvC,EAAO,OA8Db,QAAA,KAAA,EA7DA,IAAMwB,EAAgB,GAChBC,EAAwB,IACxBC,EAAiB,IACjBsB,EAAiB,EACjBC,EAAgB,IAEhBC,EAAmB,IACnBC,EAAmB,IAEnBC,EAAU,CAAC,GAAI,GAAI,GAAI,IACvBC,EAAU,CAAC,GAAI,GAAI,GAAI,IACvBC,EAAO,CAAC,EAAG,GAAI,GAAI,IACnBC,EAAO,CAAC,EAAG,GAAI,GAAI,IACnBC,EAAO,CAAC,EAAG,GAAI,GAAI,IAEnBpD,EAAO,WAACqD,IAAAA,EAAQ,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,QACpBlC,OAAAA,EAAQnB,KAAK,CACXF,KAAMF,EACNyD,MAAAA,EACA9B,WAAW,EAAS,EAAA,UAAA,CAAC,GAAI,IACzBV,OAAO,EAAS,EAAA,UAAA,CAACmC,EAASC,EAASC,EAAMC,EAAMC,OAyCnD,QAAA,KAAA,EAtCA,IAAME,EAAS,SAAC7B,GACV8B,IAAAA,EADsB,EAGL9B,EAAAA,EAAAA,EAAQgB,YAHH,IAGe,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAA,IAAA,EAAA,EAAA,EAAA,MAAA,GAA/BC,EAA+B,EAAA,GAA3BC,EAA2B,EAAA,GAErC,IAAA,EAAOC,EAAAA,QAAAA,KACNnB,EAAQK,GAAGY,EAAIC,EAAIa,EAAK5D,OACvB6B,EAAQK,GAAGY,EAAIC,EAAIc,EAAI7D,OACvB6B,EAAQK,GAAGY,EAAIC,EAAIe,EAAM9D,OAC3B,CACA2D,EAAe,CAACb,EAAIC,GACpB,QAXsB,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,IAetBY,IACF9B,EAAQG,IAARH,MAAAA,EAAe8B,EAAAA,GAAcvD,OAAAA,CAAAA,EAAK,YAClCyB,EAAQG,IAAI,EAAG,GAAG,EAAlB,EAAA,YAIE+B,EAAO,SAAClC,EAASmC,GACjBC,IAAAA,EADkC,EAGjBpC,EAAAA,EAAAA,EAAQqC,YAHS,IAGG,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAA,IAAA,EAAA,EAAA,EAAA,MAAA,GAA/BpB,EAA+B,EAAA,GAA3BC,EAA2B,EAAA,GAErC,IAAA,EAAOiB,EAAAA,QAAAA,KACNnC,EAAQK,GAAGY,EAAIC,EAAIa,EAAK5D,OACvB6B,EAAQK,GAAGY,EAAIC,EAAIc,EAAI7D,OACvB6B,EAAQK,GAAGY,EAAIC,EAAIe,EAAM9D,OAC3B,CACAiE,EAAa,CAACnB,EAAIC,GAClB,QAXkC,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,IAclCkB,GAAYpC,EAAQG,IAARH,MAAAA,EAAeoC,EAAAA,GAAY7D,OAAAA,CAAAA,EAAK,aAG5CwB,EAAS,SAACC,EAASP,GACfA,OAAAA,EAAKmC,OACN,IAAA,SACC,EAAOjC,EAAAA,QAAAA,IACTK,EAAQG,IAAI,EAAG,GAAG,EAAlB,EAAA,WAGE,EAAOP,EAAAA,QAAAA,IAA0BI,EAAQK,GAAG,GAAI,EAAGnC,EAAlB,OACnC8B,EAAQI,KAAK,GAAI,GACRJ,EAAQK,GAAGZ,EAAKK,WAAY,EAAG5B,EAA/B,QACT8B,EAAQI,KAAKX,EAAKK,WAAY,IAG5B,EAAOD,EAAAA,QAAAA,IAAmBG,EAAQK,GAAGZ,EAAKK,UAAW,EAAG5B,EAA9B,OAC5B8B,EAAQI,KAAKX,EAAKK,UAAW,GAE7BL,EAAKK,YAAc,EAGrB+B,EAAO7B,GACP,MACG,IAAA,QAGC,GAFJkC,EAAKlC,EAASoB,IAEV,EAAOC,EAAAA,QAAAA,GAET,YADArB,EAAQG,IAAI,EAAG,EAAGmC,EAAM/D,QAEfyB,EAAQK,GAAG,GAAI,EAAGnC,EAAlB,UACL,EAAOoD,EAAAA,QAAAA,GACTtB,EAAQG,IAAI,GAAI,EAAG5B,MACV,EAAO,EAAA,QAAA,MAChByB,EAAQG,IAAI,GAAI,EAAGmC,EAAM/D,SAIzBgE,IAdN,EAcMA,GAAc,EAEGvC,EAAAA,EAAAA,EAAQgB,YAhB/B,IAgB2C,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAA,IAAA,EAAA,EAAA,EAAA,MAAA,GAA/BC,EAA+B,EAAA,GAA3BC,EAA2B,EAAA,GACnC,IAAClB,EAAQK,GAAGY,EAAIC,EAAIhD,EAAnB,OAA2B,CAC9BqE,GAAc,EACd,QAnBN,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,IAsBMA,GACFvC,EAAQG,IAAI,EAAG,GAAG,EAAlB,EAAA,YA5CR,QAAA,OAAA;;ACvDA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,OAAA,QAAA,KAAA,QAAA,UAAA,EAfA,IAAA,EAAA,QAAA,WACA,EAAA,EAAA,QAAA,eACA,EAAA,EAAA,QAAA,WACA,EAAA,EAAA,QAAA,UACA,EAAA,QAAA,aAWA,SAAA,EAAA,GAAA,GAAA,mBAAA,QAAA,OAAA,KAAA,IAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,OAAA,EAAA,SAAA,GAAA,OAAA,EAAA,EAAA,IAAA,GAAA,SAAA,EAAA,EAAA,GAAA,IAAA,GAAA,GAAA,EAAA,WAAA,OAAA,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,EAAA,GAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,YAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EATA,IAAMhC,EAAO,QASb,QAAA,KAAA,EAPA,IAAMI,EAAO,WACXmB,OAAAA,EAAQnB,KAAK,CACXF,KAAMF,EACN2B,WAAW,EAAS,EAAA,UAAA,CAAC,GAAI,IACzBV,MAAO,CAAC,IAAK,GAAI,GAAI,OAGzB,QAAA,KAAA,EAAA,IAAMW,EAAS,SAACC,EAASP,GAGfc,OAFMP,EAAQE,IAAI,EAAG,GAEf7B,MACPmC,KAAAA,EAAKrC,KACLD,KAAAA,EAAL,MACE8B,EAAQI,KAAK,EAAG,GAChB,MACG4B,KAAAA,EAAI7D,KACP6B,EAAQS,KAAK,EAAG,GAChB,MACGtC,KAAAA,EACC6B,EAAQK,GAAGZ,EAAKK,UAAW,EAAG5B,EAA9B,QACF8B,EAAQI,KAAKX,EAAKK,UAAW,GAMjCE,EAAQK,GAAGZ,EAAKK,UAAW,EAAG5B,EAA9B,QACA8B,EAAQK,GAAGZ,EAAKK,UAAW,EAAGU,EAAKrC,MAEnC6B,EAAQI,KAAKX,EAAKK,UAAW,GAE7BL,EAAKK,YAAc,GAGjB,EAAO,EAAA,QAAA,OACTJ,EAAQF,YAAYC,IA5BxB,QAAA,OAAA;;ACLA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,OAAA,QAAA,KAAA,QAAA,UAAA,EAVA,IAAA,EAAA,QAAA,WACA,EAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,UACA,EAAA,EAAA,QAAA,eACA,EAAA,QAAA,aAMA,SAAA,EAAA,GAAA,GAAA,mBAAA,QAAA,OAAA,KAAA,IAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,OAAA,EAAA,SAAA,GAAA,OAAA,EAAA,EAAA,IAAA,GAAA,SAAA,EAAA,EAAA,GAAA,IAAA,GAAA,GAAA,EAAA,WAAA,OAAA,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,EAAA,GAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,YAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EAJA,IAAMtB,EAAO,OAIb,QAAA,KAAA,EAFA,IAAMI,EAAO,WAAMmB,OAAAA,EAAQnB,KAAK,CAAEF,KAAMF,EAAMiB,MAAO,CAAC,GAAI,GAAI,GAAI,OAElE,QAAA,KAAA,EAAA,IAAMW,EAAS,SAACC,GACRO,IAAAA,EAAQP,EAAQE,IAAI,EAAG,GACvBJ,GAAY,EAAS,EAAA,UAAA,CAAC,GAAI,IAExBS,OAAAA,EAAMlC,MACPH,KAAAA,EAAL,MACE8B,EAAQI,KAAK,EAAG,GAChB,MACG4B,KAAAA,EAAI7D,KACJmC,KAAAA,EAAMnC,KACT6B,EAAQS,KAAK,EAAG,GAChB,MACGtC,KAAAA,EACC6B,EAAQK,GAAGP,EAAW,EAAG5B,EAAzB,QACF8B,EAAQI,KAAKN,EAAW,KAdhC,QAAA,OAAA;;ACNA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,KAAA,QAAA,UAAA,EAJA,IAAA,EAAA,EAAA,QAAA,eAIA,SAAA,EAAA,GAAA,GAAA,mBAAA,QAAA,OAAA,KAAA,IAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,OAAA,EAAA,SAAA,GAAA,OAAA,EAAA,EAAA,IAAA,GAAA,SAAA,EAAA,EAAA,GAAA,IAAA,GAAA,GAAA,EAAA,WAAA,OAAA,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,EAAA,GAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,YAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EAFA,IAAM3B,EAAO,QAEb,QAAA,KAAA,EAAA,IAAMI,EAAO,WAAMmB,OAAAA,EAAQnB,KAAK,CAAEF,KAAMF,EAAMiB,MAAO,CAAC,EAAG,EAAG,GAAI,OAAhE,QAAA,KAAA;;ACee,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,QAAA,oBAAA,EAnBf,IAmBe,EAnBf,EAAA,EAAA,QAAA,WACA,EAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,WACA,EAAA,EAAA,QAAA,WACA,EAAA,EAAA,QAAA,UACA,EAAA,EAAA,QAAA,YAWe,SAAA,EAAA,GAAA,GAAA,mBAAA,QAAA,OAAA,KAAA,IAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,OAAA,EAAA,SAAA,GAAA,OAAA,EAAA,EAAA,IAAA,GAAA,SAAA,EAAA,EAAA,GAAA,IAAA,GAAA,GAAA,EAAA,WAAA,OAAA,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,EAAA,GAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,YAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,KAAA,EAAA,OAAA,eAAA,EAAA,EAAA,CAAA,MAAA,EAAA,YAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,GAAA,EAAA,EATR,IAAMoD,GACVC,EAAAA,EAAAA,GAAAA,EAAKtE,KAAOsE,GACZnC,EAAAA,EAAAA,EAAMnC,KAAOmC,GACbgC,EAAAA,EAAAA,EAAMnE,KAAOmE,GACb9B,EAAAA,EAAAA,EAAKrC,KAAOqC,GACZwB,EAAAA,EAAAA,EAAI7D,KAAO6D,GACXC,EAAAA,EAAAA,EAAM9D,KAAO8D,GANT,GASQ,QAAA,eAAA,EAAA,IAAA,EAAA,CACbQ,KAAAA,EACAC,MAAAA,EACAtE,MAAAA,EACAkC,MAAAA,EACAgC,MAAAA,EACAP,KAAAA,EACAvB,KAAAA,EACAwB,IAAAA,EACAC,MAAAA,GATa,QAAA,QAAA;;AC2Hf,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,UAAA,QAAA,OAAA,QAAA,KAAA,QAAA,kBAAA,QAAA,cAAA,QAAA,UAAA,EA9IA,IAAA,EAAA,QAAA,oBAEA,EAAA,QAAA,cA4IA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,EAAA,IAAA,EAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,6IAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,MAAA,EAAA,KAAA,oBAAA,QAAA,EAAA,OAAA,WAAA,EAAA,cAAA,GAAA,MAAA,EAAA,CAAA,IAAA,EAAA,EAAA,EAAA,GAAA,GAAA,EAAA,GAAA,EAAA,IAAA,IAAA,EAAA,EAAA,KAAA,KAAA,GAAA,EAAA,EAAA,QAAA,QAAA,EAAA,KAAA,EAAA,QAAA,GAAA,EAAA,SAAA,GAAA,GAAA,IAAA,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAAA,OAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EA1IA,IAEIU,EACAC,EACAC,EACAC,EALAC,EAAQ,GACRC,EAAO,EAMLC,EAAO,WAACC,IAAAA,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,IACtBP,EAAa,EAEbC,EADAC,EAAoB,CAAEM,EAAG,EAAGC,EAAGF,GAE/BF,EAAOE,EACPH,EAAQM,MAAMC,KAAK,CAAErE,OAAQ+D,EAAOA,GAAQ,WAAM,OAAA,EAAN,EAAA,YA8H9C,QAAA,KAAA,EA3HA,IAAM9C,EAAM,SAACiD,EAAGC,GACVD,OAAAA,EAAI,GAAKC,EAAI,GAAKD,GAAKH,GAAQI,GAAKJ,EAAa,CAAE3E,KAAM,UAEtD0E,EAAMQ,EAASJ,EAAGC,KAGrBjD,EAAM,SAACgD,EAAGC,GAAG3D,IAAAA,EAAO,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,IAAA,EAAY,EAAA,SAC9B+D,EAAQD,EAASJ,EAAGC,GAE1B3D,EAAKnB,MAAQqE,EAAa,EAC1BI,EAAMS,GAAS/D,EAEX2D,EAAIR,EAAWQ,IAAGR,EAAa,CAAEO,EAAAA,EAAGC,EAAAA,KAGpCK,EAAgB,WAACC,IAAAA,EAAQ,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,EACtBL,OAAAA,MAAMC,KAAK,CAAErE,OAAQyE,GAAS,SAACC,EAAGC,GACjCC,IAAAA,EAAID,EAAI,EACP,MAAA,CACL,EAAM,EAALC,GAAa,EAALA,GACT,EAAM,EAALA,EAAQ,GACT,EAAM,EAALA,EAAY,EAAJA,GACT,CAAC,GAAQ,EAALA,GACJ,CAAC,EAAO,EAAJA,GACJ,CAAK,EAAJA,GAAY,EAALA,GACR,CAAK,EAAJA,EAAO,GACR,CAAK,EAAJA,EAAW,EAAJA,MAETC,QAGC9C,EAAayC,EAAc,GAC3BpB,EAAaoB,EAAc,GAE3BM,EAAY,SAACC,EAAIC,GA4Bd,MAAA,CACL5D,GAzBS,SAACS,EAAIC,EAAI1C,GAAS6B,OAAAA,EAAI8D,EAAKlD,EAAImD,EAAKlD,GAAI1C,OAASA,GA0B1D+B,KAxBW,SAACU,EAAIC,GACVtB,IAAAA,EAAOS,EAAI8D,EAAIC,GAEjBxE,EAAKnB,MAAQqE,IAEjBxC,EAAI6D,EAAKlD,EAAImD,EAAKlD,EAAItB,GACtBU,EAAI6D,EAAIC,GAAI,EAAT,EAAA,YAmBHxD,KAhBW,SAACK,EAAIC,GACVmD,IAAAA,EAAKhE,EAAI8D,EAAIC,GAEfC,KAAAA,EAAG5F,MAAQqE,GAAXuB,CAEEf,IAAAA,EAAIa,EAAKlD,EACTsC,EAAIa,EAAKlD,EACToD,EAAKjE,EAAIiD,EAAGC,GAElBjD,EAAIgD,EAAGC,EAAGc,GACV/D,EAAI6D,EAAIC,EAAIE,KAOZhE,IA9BkB,SAACW,EAAIC,EAAItB,GAASU,OAAAA,EAAI6D,EAAKlD,EAAImD,EAAKlD,EAAItB,IA+B1DS,IAhCkB,SAACY,EAAIC,GAAOb,OAAAA,EAAI8D,EAAKlD,EAAImD,EAAKlD,IAiChDC,WAAAA,EACAqB,WAAAA,IAIE+B,EAAOL,EAAU,EAAG,GAEpBR,EAAW,SAACJ,EAAGC,GAAMD,OAAAA,EAAIH,EAAOI,GAEhCiB,EAAY,SAACb,GACXJ,IAAAA,EAAII,EAAQR,EAGX,MAAA,EAFIQ,EAAQJ,GAAKJ,EAEbI,IAGPkB,EAAO,SAACnB,EAAGC,EAAG3D,GACdA,GAAAA,EAAKpB,OAASH,EAAd,OAAuBkG,EAAK/D,GAAG8C,EAAGC,EAAGlF,EAAd,OAAsB,CACzCsF,IAAAA,EAAQD,EAASJ,EAAGC,GAC1B3D,EAAKnB,MAAQqE,EACbI,EAAMS,GAAS/D,EACX2D,EAAIR,EAAWQ,IAAGR,EAAa,CAAEO,EAAAA,EAAGC,EAAAA,MAkC5C,QAAA,KAAA,EA9BA,IAAMrD,EAAS,WACb+C,EAAc,GAET,IAAA,IAAIc,EAAI,EAAGW,EAAIxB,EAAM9D,OAAQ2E,EAAIW,EAAGX,IAAK,CAC7BS,IAAf,EAAA,EAAeA,EAAUT,GAAzB,GAAOT,EAAP,EAAA,GAAUC,EAAV,EAAA,GACM3D,EAAOsD,EAAMa,GAEfnE,EAAKpB,OAASH,EAAlB,QACMuB,EAAKL,SAAS0D,EAChBA,EAAYrD,EAAKL,OAAOoF,KAAK,CAAErB,EAAAA,EAAGC,EAAAA,EAAG3D,KAAAA,IAErCqD,EAAYrD,EAAKL,OAAS,CAAC,CAAE+D,EAAAA,EAAGC,EAAAA,EAAG3D,KAAAA,KAInCA,EAAKpB,QAAQmE,EAAjB,gBACiB/C,EAAAA,eAAAA,EAAKpB,MAAM0B,OAAOgE,EAAUZ,EAAGC,GAAI3D,GAGtDkD,KAWF,QAAA,OAAA,EARA,IAAM8B,EAAgB,WAAM7B,OAAAA,EAAWQ,GAQvC,QAAA,cAAA,EANA,IAAMsB,EAAoB,WACpBN,EAAK/D,GAAGuC,EAAWO,EAAGP,EAAWQ,EAAGlF,EAApC,SACF0E,EAAaC,IAIjB,QAAA,kBAAA,EAAA,IAAM8B,EAAY,WAAM7B,OAAAA,GAAxB,QAAA,UAAA;;AC9HA,aAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,oBAAA,QAAA,EAAA,OAAA,WAAA,EAAA,cAAA,IAAA,EAAA,CAAA,GAAA,MAAA,QAAA,KAAA,EAAA,EAAA,KAAA,GAAA,GAAA,iBAAA,EAAA,OAAA,CAAA,IAAA,EAAA,GAAA,IAAA,EAAA,EAAA,EAAA,aAAA,MAAA,CAAA,EAAA,EAAA,EAAA,WAAA,OAAA,GAAA,EAAA,OAAA,CAAA,MAAA,GAAA,CAAA,MAAA,EAAA,MAAA,EAAA,OAAA,EAAA,SAAA,GAAA,MAAA,GAAA,EAAA,GAAA,MAAA,IAAA,UAAA,yIAAA,IAAA,EAAA,GAAA,EAAA,GAAA,EAAA,MAAA,CAAA,EAAA,WAAA,EAAA,EAAA,KAAA,IAAA,EAAA,WAAA,IAAA,EAAA,EAAA,OAAA,OAAA,EAAA,EAAA,KAAA,GAAA,EAAA,SAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,WAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,KAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,SAAA,QAAA,UAAA,EAhBA,IAAM8B,EAAQ,IACRC,EAAS,IACTC,EAAW,EAcjB,QAAA,SAAA,EAbA,IAAMC,EAASC,SAASC,cAAc,UAChCC,EAAMH,EAAOI,WAAW,KAAM,CAAEC,OAAO,IACvCC,EAAMC,OAAOC,kBAAoB,EACjCC,EAAe,EAErBT,EAAOH,MAAQA,EAAQS,EACvBN,EAAOF,OAASA,EAASQ,EACzBN,EAAOU,MAAMb,MAAWA,GAAAA,OAAAA,EAAxB,MACAG,EAAOU,MAAMZ,OAAYA,GAAAA,OAAAA,EAAzB,MACAK,EAAIQ,MAAML,EAAKA,GACfH,EAAIS,UAAY,QAChBT,EAAIU,SAAS,EAAG,EAAGhB,EAAOC,GAE1B,IAAMP,EAAO,SAACuB,GACNC,IAAAA,EAAYD,EAAMpB,gBAAkBK,EAAWU,EAErDN,EAAIS,UAAY,QAChBT,EAAIU,SAAS,EAAGE,EAAWlB,EAAOC,EAASiB,GAEvCR,OAAOS,QACTb,EAAIS,UAAY,MAChBT,EAAIU,SAAS,EAAGE,EAAWlB,EAAO,IAG9B9B,IAAAA,EAAc+C,EAAMlB,YAErB,IAAA,IAAIvF,KAAS0D,EAAa,CAC7BoC,EAAIS,UAAYvG,EACV4G,IAFuB,EAIRA,EAAAA,EAFNlD,EAAY1D,IAFE,IAIA,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAA,IAAA,EAAA,EAAA,MAAlB+D,EAAAA,EAAAA,EAAGC,EAAAA,EAAAA,EACZ8B,EAAIU,SAASzC,EAAI2B,EAAU1B,EAAI0B,EAAUA,EAAUA,IALxB,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,KAS/Be,EAAMnB,qBAtBR,QAAA,KAAA;;ACwEC,aAxFD,IAAA,EAAA,EAAA,QAAA,cACA,EAAA,EAAA,QAAA,aACA,EAAA,EAAA,QAAA,eAsFC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,EAAA,GAAA,GAAA,mBAAA,QAAA,OAAA,KAAA,IAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,OAAA,EAAA,SAAA,GAAA,OAAA,EAAA,EAAA,IAAA,GAAA,SAAA,EAAA,EAAA,GAAA,IAAA,GAAA,GAAA,EAAA,WAAA,OAAA,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,EAAA,GAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,YAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EAAA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,wIAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,MAAA,EAAA,OAAA,WAAA,MAAA,EAAA,cAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EApFDY,OAAOS,OAAQ,EACf,IACIE,EAAKC,EAASC,EAAMC,EADlBC,EAAU,GAGVC,EAAO,WACXtG,EAAQD,SACRgF,EAAOT,KAAKtE,IAGRuG,EAAO,SAAPA,IACJC,sBAAsBD,GACtBN,EAAMQ,KAAKR,OACXC,EAAUD,EAAME,GAEFC,IACZD,EAAOF,EAAOC,EAAUE,EACxBE,MAIEI,EAAQ,WACZN,EAAc,IAAOC,EACrBF,EAAOM,KAAKR,MAEZM,KAGII,EAAU3B,SAASC,cAAc,WAEnC2B,GAAU,EAERC,EAAQ,SAACC,GAAMnI,OAAAA,KAAKoI,MAAMD,EAAI/B,EAAOD,WAErCT,EAAY,SAAC2C,GACX7D,IAAAA,EAAI0D,EAAMG,EAAE7D,GACZC,EAAIyD,EAAMG,EAAE5D,GAEX,MAAA,CACL,CAACD,EAAGC,GACJ,CAACD,EAAI,EAAGC,GACR,CAACD,EAAI,EAAGC,GACR,CAACD,EAAGC,EAAI,GACR,CAACD,EAAGC,EAAI,KAIN6D,EAAgB,SAACD,GACrB3C,EAAU2C,GAAGE,QAAQ,SAACC,GAAWnH,OAAAA,EAAQsE,KAARtE,MAAAA,EAAgBmH,EAAAA,GAAQC,OAAAA,CAAAA,UAG3DT,EAAQU,iBAAiB,YAAa,SAACL,GACjCJ,GAASK,EAAcD,KAE7BL,EAAQU,iBAAiB,QAASJ,GAClCN,EAAQU,iBAAiB,YAAa,WACpCT,GAAU,IAEZD,EAAQU,iBAAiB,UAAW,WAClCT,GAAU,IAGZ,IAAIU,EAAkBC,EAAS9E,QAAAA,KAEzB+E,EAAQxC,SAASC,cAAc,eAErCwC,OAAOzI,OAAOuI,EAAd,SAAwBL,QAAQ,SAACxH,GACzBgI,IAAAA,EAAM1C,SAAS2C,cAAc,UAEnCD,EAAIE,YAAclI,EAAQvB,KAC1BuJ,EAAIL,iBAAiB,QAAS,WACpBC,OAAAA,EAAkB5H,IAG5B8H,EAAMK,YAAYH,KAGpB,IAAMN,EAAa,WAAME,OAAAA,EAAgB/I,QAEzCyG,SAASC,cAAc,SAASoC,iBAAiB,QAASf,GAE1DtG,EAAQiD,OAEHqC,OAAOS,OACVW","file":"main.97ee0bf6.js","sourceRoot":"../src","sourcesContent":["const EMPTY = 'EMPTY'\nconst NAME = EMPTY\nconst empty = () => ({ type: EMPTY, clock: 0 })\nconst make = empty\n\nexport { EMPTY, empty, make, NAME }\n","const rand = (max, min = 0) => Math.random() * (max - min) + min\nconst randInt = (...args) => Math.round(rand(...args))\nconst pickRand = (values) => values[randInt(values.length - 1, 0)]\nconst chance = (threshold) => Math.random() < threshold\n\nexport { rand, randInt, pickRand, chance }\n","import { randInt } from './random'\n\nconst make = ({ type, color, ...meta }) => ({\n  type,\n  clock: 0,\n  colorInput: color,\n  color: createColor(color),\n  ...meta,\n})\n\nconst createColor = (color) =>\n  `hsl(${color[0]}deg ${color[1]}% ${randInt(color[2], color[3])}%)`\n\nconst updateColor = (cell) => {\n  cell.color = createColor(cell.colorInput)\n}\n\nexport { make, updateColor }\n","import * as element from '../element'\n\nconst NAME = 'WOOD'\n\nconst make = () => element.make({ type: NAME, color: [33, 41, 30, 15] })\n\nexport { NAME, make }\n","import * as water from './water'\nimport { EMPTY, empty } from './empty'\nimport * as element from '../element'\nimport { chance, pickRand } from '../random'\n\nconst NAME = 'SMOKE'\nconst despawnChance = 0.015\nconst chanceOfGoingStraight = 0.95\nconst chanceOfSpread = 0.5\n\nconst make = () =>\n  element.make({\n    type: NAME,\n    direction: pickRand([1, -1]),\n    color: [4, 2, 79, 90],\n  })\n\nconst update = (sandpit, cell) => {\n  const above = sandpit.get(0, -1)\n\n  if (chance(despawnChance)) {\n    sandpit.set(0, 0, empty())\n  }\n\n  switch (above.type) {\n    case EMPTY:\n      if (chance(chanceOfGoingStraight)) {\n        sandpit.move(0, -1)\n      } else if (sandpit.is(cell.direction, 1, EMPTY)) {\n        sandpit.move(cell.direction, -1)\n      }\n      break\n    case water.NAME:\n      sandpit.move(0, -1)\n      break\n  }\n\n  if (chance(chanceOfSpread) && sandpit.is(cell.direction, 0, EMPTY)) {\n    sandpit.move(cell.direction, 0)\n  } else {\n    cell.direction *= -1\n  }\n}\n\nexport { NAME, make, update }\n","import { EMPTY } from './empty'\nimport * as element from '../element'\nimport * as fire from './fire'\nimport * as water from './water'\nimport { chance, pickRand } from '../random'\n\nconst NAME = 'OIL'\n\nconst make = () =>\n  element.make({\n    type: NAME,\n    direction: pickRand([1, -1]),\n    color: [25, 59, 41, 48],\n  })\n\nconst update = (sandpit, cell) => {\n  const below = sandpit.get(0, 1)\n\n  switch (below.type) {\n    case fire.NAME:\n    case EMPTY:\n      sandpit.move(0, 1)\n      break\n    case NAME:\n      if (sandpit.is(cell.direction, 1, EMPTY)) {\n        sandpit.move(cell.direction, 1)\n      }\n      break\n    case water.NAME:\n      if (sandpit.is(cell.direction, -1, water.NAME)) {\n        sandpit.swap(cell.direction, -1)\n      }\n      break\n  }\n\n  if (sandpit.is(cell.direction, 0, EMPTY)) {\n    sandpit.move(cell.direction, 0)\n  } else if (chance(0.5) && sandpit.is(cell.direction, 0, water.NAME)) {\n    sandpit.swap(cell.direction, 0)\n  } else {\n    cell.direction *= -1\n  }\n\n  if (chance(0.005)) {\n    element.updateColor(cell)\n  }\n}\n\nexport { NAME, make, update }\n","import { empty, EMPTY } from './empty'\nimport * as water from './water'\nimport * as element from '../element'\nimport { chance, pickRand, randInt } from '../random'\n\nconst NAME = 'PLANT'\n\nconst make = (energy, color = [122, 73, 36, 30]) => {\n  const isStem = chance(0.1)\n\n  return element.make({\n    type: NAME,\n    kind: isStem ? 'stem' : 'bud',\n    energy:\n      energy !== undefined ? energy : isStem ? randInt(10, 15) : randInt(1, 5),\n    direction: [pickRand([1, 0, -1]), -1],\n    color,\n  })\n}\n\nconst update = (sandpit, cell) => {\n  const [dx, dy] = cell.direction\n\n  if (sandpit.is(dx, dy, EMPTY)) {\n    if (chance(0.2) && cell.energy > 0) {\n      cell.energy--\n      sandpit.set(dx, dy, make(cell.energy))\n    }\n  }\n\n  for (let [nx, ny] of sandpit.neighbors1) {\n    if (chance(0.05) && sandpit.is(nx, ny, water.NAME)) {\n      sandpit.set(nx, ny, empty())\n      sandpit.set(dx, dy, make(cell.energy))\n    }\n  }\n}\n\nexport { NAME, make, update }\n","import { EMPTY, empty } from './empty'\nimport * as wood from './wood'\nimport * as smoke from './smoke'\nimport * as oil from './oil'\nimport * as plant from './plant'\nimport * as element from '../element'\nimport { chance, pickRand } from '../random'\n\nconst NAME = 'FIRE'\nconst despawnChance = 0.2\nconst chanceOfGoingStraight = 0.73\nconst chanceOfSpread = 0.75\nconst ignitingChance = 1\nconst burningChance = 0.01\n\nconst extinguishChance = 0.01\nconst looseFlameChance = 0.06\n\nconst orange1 = [35, 76, 62, 72]\nconst orange2 = [35, 79, 67, 77]\nconst red1 = [7, 82, 56, 66]\nconst red2 = [7, 82, 49, 59]\nconst red3 = [7, 87, 33, 43]\n\nconst make = (phase = 'spark') =>\n  element.make({\n    type: NAME,\n    phase,\n    direction: pickRand([1, -1]),\n    color: pickRand([orange1, orange2, red1, red2, red3]),\n  })\n\nconst ignite = (sandpit) => {\n  let igniteTarget\n\n  for (let [nx, ny] of sandpit.neighbors1) {\n    if (\n      chance(ignitingChance) &&\n      (sandpit.is(nx, ny, wood.NAME) ||\n        sandpit.is(nx, ny, oil.NAME) ||\n        sandpit.is(nx, ny, plant.NAME))\n    ) {\n      igniteTarget = [nx, ny]\n      break\n    }\n  }\n\n  if (igniteTarget) {\n    sandpit.set(...igniteTarget, make('blaze'))\n    sandpit.set(0, 0, empty())\n  }\n}\n\nconst burn = (sandpit, spreadChance) => {\n  let burnTarget\n\n  for (let [nx, ny] of sandpit.neighbors2) {\n    if (\n      chance(spreadChance) &&\n      (sandpit.is(nx, ny, wood.NAME) ||\n        sandpit.is(nx, ny, oil.NAME) ||\n        sandpit.is(nx, ny, plant.NAME))\n    ) {\n      burnTarget = [nx, ny]\n      break\n    }\n  }\n  if (burnTarget) sandpit.set(...burnTarget, make('blaze'))\n}\n\nconst update = (sandpit, cell) => {\n  switch (cell.phase) {\n    case 'spark':\n      if (chance(despawnChance)) {\n        sandpit.set(0, 0, empty())\n      }\n\n      if (chance(chanceOfGoingStraight) && sandpit.is(0, -1, EMPTY)) {\n        sandpit.move(0, -1)\n      } else if (sandpit.is(cell.direction, -1, EMPTY)) {\n        sandpit.move(cell.direction, -1)\n      }\n\n      if (chance(chanceOfSpread) && sandpit.is(cell.direction, 0, EMPTY)) {\n        sandpit.move(cell.direction, 0)\n      } else {\n        cell.direction *= -1\n      }\n\n      ignite(sandpit)\n      break\n    case 'blaze':\n      burn(sandpit, burningChance)\n\n      if (chance(extinguishChance)) {\n        sandpit.set(0, 0, smoke.make())\n        return\n      } else if (sandpit.is(0, -1, EMPTY)) {\n        if (chance(looseFlameChance)) {\n          sandpit.set(0, -1, make())\n        } else if (chance(0.15)) {\n          sandpit.set(0, -1, smoke.make())\n        }\n      }\n\n      let noNeighbors = true\n\n      for (let [nx, ny] of sandpit.neighbors1) {\n        if (!sandpit.is(nx, ny, EMPTY)) {\n          noNeighbors = false\n          break\n        }\n      }\n      if (noNeighbors) {\n        sandpit.set(0, 0, empty())\n      }\n      break\n  }\n}\n\nexport { NAME, make, update }\n","import { EMPTY } from './empty'\nimport * as element from '../element'\nimport * as fire from './fire'\nimport * as oil from './oil'\nimport { chance, pickRand } from '../random'\n\nconst NAME = 'WATER'\n\nconst make = () =>\n  element.make({\n    type: NAME,\n    direction: pickRand([1, -1]),\n    color: [216, 65, 60, 50],\n  })\n\nconst update = (sandpit, cell) => {\n  const below = sandpit.get(0, 1)\n\n  switch (below.type) {\n    case fire.NAME:\n    case EMPTY:\n      sandpit.move(0, 1)\n      break\n    case oil.NAME:\n      sandpit.swap(0, 1)\n      break\n    case NAME:\n      if (sandpit.is(cell.direction, 1, EMPTY)) {\n        sandpit.move(cell.direction, 1)\n      }\n      break\n  }\n\n  if (\n    sandpit.is(cell.direction, 0, EMPTY) ||\n    sandpit.is(cell.direction, 0, fire.NAME)\n  ) {\n    sandpit.move(cell.direction, 0)\n  } else {\n    cell.direction *= -1\n  }\n\n  if (chance(0.005)) {\n    element.updateColor(cell)\n  }\n}\n\nexport { NAME, make, update }\n","import { EMPTY } from './empty'\nimport * as water from './water'\nimport * as oil from './oil'\nimport * as element from '../element'\nimport { pickRand } from '../random'\n\nconst NAME = 'SAND'\n\nconst make = () => element.make({ type: NAME, color: [46, 78, 75, 50] })\n\nconst update = (sandpit) => {\n  const below = sandpit.get(0, 1)\n  const direction = pickRand([1, -1])\n\n  switch (below.type) {\n    case EMPTY:\n      sandpit.move(0, 1)\n      break\n    case oil.NAME:\n    case water.NAME:\n      sandpit.swap(0, 1)\n      break\n    case NAME:\n      if (sandpit.is(direction, 1, EMPTY)) {\n        sandpit.move(direction, 1)\n      }\n      break\n  }\n}\n\nexport { NAME, make, update }\n","import * as element from '../element'\n\nconst NAME = 'STONE'\n\nconst make = () => element.make({ type: NAME, color: [0, 0, 60, 40] })\n\nexport { NAME, make }\n","import * as sand from './sand'\nimport * as stone from './stone'\nimport * as empty from './empty'\nimport * as water from './water'\nimport * as smoke from './smoke'\nimport * as wood from './wood'\nimport * as fire from './fire'\nimport * as oil from './oil'\nimport * as plant from './plant'\n\nexport const activeElements = {\n  [sand.NAME]: sand,\n  [water.NAME]: water,\n  [smoke.NAME]: smoke,\n  [fire.NAME]: fire,\n  [oil.NAME]: oil,\n  [plant.NAME]: plant,\n}\n\nexport default {\n  sand,\n  stone,\n  empty,\n  water,\n  smoke,\n  wood,\n  fire,\n  oil,\n  plant,\n}\n","import { empty, EMPTY } from './elements/empty'\n\nimport { activeElements } from './elements'\n\nlet cells = []\nlet size = 0\nlet generation\nlet upperBound\nlet defaultUpperBound\nlet activeCells\n\nconst init = (newSize = 100) => {\n  generation = 1\n  defaultUpperBound = { x: 0, y: newSize }\n  upperBound = defaultUpperBound\n  size = newSize\n  cells = Array.from({ length: size * size }, () => empty())\n}\n\nconst get = (x, y) => {\n  if (x < 0 || y < 0 || x >= size || y >= size) return { type: 'BOUNDS' }\n\n  return cells[getIndex(x, y)]\n}\n\nconst set = (x, y, cell = empty()) => {\n  const index = getIndex(x, y)\n\n  cell.clock = generation + 1\n  cells[index] = cell\n\n  if (y < upperBound.y) upperBound = { x, y }\n}\n\nconst makeNeighbors = (range = 1) => {\n  return Array.from({ length: range }, (_, i) => {\n    const n = i + 1\n    return [\n      [n * -1, n * -1],\n      [n * -1, 0],\n      [n * -1, n * 1],\n      [0, n * -1],\n      [0, n * 1],\n      [n * 1, n * -1],\n      [n * 1, 0],\n      [n * 1, n * 1],\n    ]\n  }).flat()\n}\n\nconst neighbors1 = makeNeighbors(1)\nconst neighbors2 = makeNeighbors(2)\n\nconst createApi = (cx, cy) => {\n  const relativeGet = (dx, dy) => get(cx + dx, cy + dy)\n  const relativeSet = (dx, dy, cell) => set(cx + dx, cy + dy, cell)\n\n  const is = (dx, dy, type) => get(cx + dx, cy + dy).type === type\n\n  const move = (dx, dy) => {\n    const cell = get(cx, cy)\n\n    if (cell.clock > generation) return\n\n    set(cx + dx, cy + dy, cell)\n    set(cx, cy, empty())\n  }\n\n  const swap = (dx, dy) => {\n    const c0 = get(cx, cy)\n\n    if (c0.clock > generation) return\n\n    const x = cx + dx\n    const y = cy + dy\n    const c1 = get(x, y)\n\n    set(x, y, c0)\n    set(cx, cy, c1)\n  }\n\n  return {\n    is,\n    move,\n    swap,\n    set: relativeSet,\n    get: relativeGet,\n    neighbors1,\n    neighbors2,\n  }\n}\n\nconst self = createApi(0, 0)\n\nconst getIndex = (x, y) => x * size + y\n\nconst getCoords = (index) => {\n  const y = index % size\n  const x = (index - y) / size\n\n  return [x, y]\n}\n\nconst draw = (x, y, cell) => {\n  if (cell.type === EMPTY || self.is(x, y, EMPTY)) {\n    const index = getIndex(x, y)\n    cell.clock = generation\n    cells[index] = cell\n    if (y < upperBound.y) upperBound = { x, y }\n  }\n}\n\nconst update = () => {\n  activeCells = {}\n\n  for (let i = 0, l = cells.length; i < l; i++) {\n    const [x, y] = getCoords(i)\n    const cell = cells[i]\n\n    if (cell.type !== EMPTY) {\n      if (cell.color in activeCells) {\n        activeCells[cell.color].push({ x, y, cell })\n      } else {\n        activeCells[cell.color] = [{ x, y, cell }]\n      }\n    }\n\n    if (cell.type in activeElements) {\n      activeElements[cell.type].update(createApi(x, y), cell)\n    }\n  }\n  generation++\n}\n\nconst getUpperBound = () => upperBound.y\n\nconst refreshUpperBound = () => {\n  if (self.is(upperBound.x, upperBound.y, EMPTY)) {\n    upperBound = defaultUpperBound\n  }\n}\n\nconst getActive = () => activeCells\n\nexport { init, getUpperBound, refreshUpperBound, draw, update, getActive }\n","const width = 500\nconst height = 500\nconst cellSize = 5\nconst canvas = document.querySelector('canvas')\nconst ctx = canvas.getContext('2d', { alpha: false })\nconst dpr = window.devicePixelRatio || 1\nconst boundsOffset = 5\n\ncanvas.width = width * dpr\ncanvas.height = height * dpr\ncanvas.style.width = `${width}px`\ncanvas.style.height = `${height}px`\nctx.scale(dpr, dpr)\nctx.fillStyle = 'white'\nctx.fillRect(0, 0, width, height)\n\nconst draw = (world) => {\n  const boundingY = world.getUpperBound() * cellSize - boundsOffset\n\n  ctx.fillStyle = 'white'\n  ctx.fillRect(0, boundingY, width, height - boundingY)\n\n  if (window.DEBUG) {\n    ctx.fillStyle = 'red'\n    ctx.fillRect(0, boundingY, width, 1)\n  }\n\n  const activeCells = world.getActive()\n\n  for (let color in activeCells) {\n    ctx.fillStyle = color\n    const blocks = activeCells[color]\n\n    for (let { x, y } of blocks) {\n      ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize)\n    }\n  }\n\n  world.refreshUpperBound()\n}\n\nexport { draw, cellSize }\n","import * as sandpit from './sandpit'\nimport * as canvas from './canvas'\nimport elements from './elements'\n\nwindow.DEBUG = false\nconst MAX_FPS = 60\nlet now, elapsed, then, fpsInterval\n\nconst tick = () => {\n  sandpit.update()\n  canvas.draw(sandpit)\n}\n\nconst loop = () => {\n  requestAnimationFrame(loop)\n  now = Date.now()\n  elapsed = now - then\n\n  if (elapsed > fpsInterval) {\n    then = now - (elapsed % fpsInterval)\n    tick()\n  }\n}\n\nconst start = () => {\n  fpsInterval = 1000 / MAX_FPS\n  then = Date.now()\n\n  loop()\n}\n\nconst $canvas = document.querySelector('#canvas')\n\nlet drawing = false\n\nconst coord = (c) => Math.floor(c / canvas.cellSize)\n\nconst getCoords = (e) => {\n  const x = coord(e.x)\n  const y = coord(e.y)\n\n  return [\n    [x, y],\n    [x + 1, y],\n    [x - 1, y],\n    [x, y + 1],\n    [x, y - 1],\n  ]\n}\n\nconst handleDrawing = (e) => {\n  getCoords(e).forEach((coords) => sandpit.draw(...coords, useElement()))\n}\n\n$canvas.addEventListener('mousemove', (e) => {\n  if (drawing) handleDrawing(e)\n})\n$canvas.addEventListener('click', handleDrawing)\n$canvas.addEventListener('mousedown', () => {\n  drawing = true\n})\n$canvas.addEventListener('mouseup', () => {\n  drawing = false\n})\n\nlet selectedElement = elements.sand\n\nconst panel = document.querySelector('#element-ui')\n\nObject.values(elements).forEach((element) => {\n  const btn = document.createElement('button')\n\n  btn.textContent = element.NAME\n  btn.addEventListener('click', () => {\n    return (selectedElement = element)\n  })\n\n  panel.appendChild(btn)\n})\n\nconst useElement = () => selectedElement.make()\n\ndocument.querySelector('#tick').addEventListener('click', tick)\n\nsandpit.init()\n\nif (!window.DEBUG) {\n  start()\n}\n"]}